// Prisma Schema for Shots & Stories Photography Portfolio

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Couples table - Main portfolio entries
model Couple {
  id          Int      @id @default(autoincrement())
  title       String   @db.VarChar(255)
  names       String   @db.VarChar(255)
  description String?  @db.Text
  location    String?  @db.VarChar(255)
  date        String?  @db.VarChar(100)
  coverImageUrl String? @map("cover_image_url") @db.VarChar(500)
  videoUrl    String?  @map("video_url") @db.VarChar(500)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  
  // Relationships
  images      CoupleImage[]
  
  @@map("couples")
  @@index([createdAt])
}

// Couple Images table - Gallery images for each couple
model CoupleImage {
  id         Int      @id @default(autoincrement())
  coupleId   Int      @map("couple_id")
  imageUrl   String   @map("image_url") @db.VarChar(500)
  orderIndex Int      @default(0) @map("order_index")
  createdAt  DateTime @default(now()) @map("created_at")
  
  // Relationships
  couple     Couple   @relation(fields: [coupleId], references: [id], onDelete: Cascade)
  
  @@map("couple_images")
  @@index([coupleId, orderIndex])
}

// Hero Images table - Homepage slider images (max 7)
model HeroImage {
  id         Int      @id @default(autoincrement())
  imageUrl   String   @map("image_url") @db.VarChar(500)
  orderIndex Int      @default(0) @map("order_index")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")
  
  @@map("hero_images")
  @@index([orderIndex])
}

// About Me table - Single row for about section
model AboutMe {
  id               Int      @id @default(autoincrement())
  authorName       String   @map("author_name") @db.VarChar(255)
  description      String?  @db.Text
  yearsExperience  Int      @default(0) @map("years_experience")
  couplesServed    Int      @default(0) @map("couples_served")
  awardsCount      Int      @default(0) @map("awards_count")
  profileImageUrl  String?  @map("profile_image_url") @db.VarChar(500)
  location         String?  @db.VarChar(255)
  updatedAt        DateTime @updatedAt @map("updated_at")
  
  @@map("about_me")
}

// Admin Users table - Authentication
model AdminUser {
  id           Int       @id @default(autoincrement())
  email        String    @unique @db.VarChar(255)
  passwordHash String    @map("password_hash") @db.VarChar(255)
  name         String?   @db.VarChar(255)
  createdAt    DateTime  @default(now()) @map("created_at")
  lastLogin    DateTime? @map("last_login")
  
  @@map("admin_users")
}